---
title: "Rを用いたデータ解析の <br> 基礎とその実践"
author: "安齋 賢（東北大学 大学院生命科学研究科 分子行動分野） "
date: "※石川由希博士（名古屋大学）が作製した資料を再構成したものです。<br>※資料の一部は岩嵜航博士（東北大学）が作製したものです。<br><br>（左右キーで進みます！）"
output:
  ioslides_presentation
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


## 凡ミス系
### 大文字小文字などの間違い
- 機械は大文字小文字や似ている文字を別の文字として認識するので、間違うとコードが走らない
- Sとs、Cとc、I(大文字のアイ)とl（小文字のエル）など

### スクリプトの左側に赤いバツが出る
![](figures/2021-06-24 10.22.55.png)

- かっこ（）の辻褄が合っていない、位置が間違っている
- ほかにもなにか間違っていることを教えてくれている
    - バツが付いている限りうまく走らない
    
    

## 凡ミス系２
### + や %>% の位置
- 抜けている（ただの改行になっている）
- 最後の行なのに+や%>%がついている

### スペルミスなど
- 例：誤「data =」→正「date=」 
- 例：誤「name ,」→正「name,」



## そんなのないよ系
### could not find function...
- libraryを読み込むのを忘れている
    - Rを立ち上げるたびに読み込む必要あり
- パッケージが古い
    - バージョンが古かったらアップデート

### could not find .../オブジェクト～がありません
- コードにあるdata.frameやvectorがうまくできていない
    - data.frameを作るところまでさかのぼって確認


## そんなのないよ系２
### no such file or directory
- ワーキングディレクトリに指定したファイルがない
- あるいは指定したファイルのあるディレクトリにいない
    - setwd("~/Dropbox/R_training_2021")
        - ""のなかはワーキングディレクトリにしたいフォルダのpath
    - Session > Set working directoryでも指定できる



## データが上手くできていない系
### なんかエラーが出る...
- data.frameの中身をheadで確認する
- どこまでうまくできているか調べる
    - %>%の前までコードを走らせて、できたdata.frameを確認
    - dafa.frameがおかしくなる部分に原因があるはず



## インストールがうまくいかない系
- パッケージのインストールが上手くいかない
    - install.package()のパッケージ名は""で囲む
    - 右側のPackageボタンからのinstallボタンでうまくいくことがあった
    - そもそもRがうまくインストールできていないことも
        - [矢内勇生先生のサイトの手順に従う](https://yukiyanai.github.io/jp/resources/)

- Rのバージョンがちがうために上手くいかない
    - 正しいバージョンで入れ直す

- インストールしたはずのパッケージが動かない
    - インストールしたパッケージに必要な別のパッケージがインストールできていない場合がある
    - エラーメッセージにパッケージ名が表示されるので直接インストールする

## 整然データになっていない系
- データの列名にスペースが入ってしまっている
    - ""で囲む
    - 列名変更
    
- データの列名の先頭が数字
    - ''で囲んだ形に自動変換される

- csvで保存できていない
    - あとから拡張子だけ書き換えてもダメ
    - エクセル保存時にcsv形式を選ぶ

## その他のエラー
- データフレーム同士をくっつけようとした場合、列数（size？）が一致していなかったために上手くいかない
    - 列数を一致させる
- データの型がnumeric(double)になるべきところがcharacterになっているため計算できない
    - characterだと数字として認識されない
        - as.numeric()で型を変更する
    - readrで読んだデータはデータフレームの値の型（dblなど）が表示されてる
-	aes()の内外が違う
    - 値に依存するパラメーターはaes()の中
    - 値に依存しないパラメーターはaes()の外